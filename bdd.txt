drop table tligne PURGE;
create table tligne(ligne varchar2(500));

variable datem date
variable nomprenom varchar2(40)

prompt Ecrivez la date du match(style = jj-moi-aa)
accept datem

prompt Ecrivez le nom dun joueur(style= prenom nom)
accept nomprenom

Declare
	nom varchar2(40);
	datemat date;
	nbpoints number(3);
	error char(50);
	tir1 number(2);
	tir2 number(2);
	tir3 number(2);

Begin
	nom:='&nomprenom';
	datemat:='&datem';
	error:='prenom et nom et/ou date introuvables';
	select lfmarques, tirs2marques, tirs3marques, tirs2marques*2+tirs3marques*3+lfmarques nbp into tir1, tir2, tir3, nbpoints from stats where prenomnoms=nom and datematch=datemat;
	if(nbpoints=0) then raise no_data_found; end if;
	insert into tligne(ligne) values('Prenom nom : '||nom);
	insert into tligne(ligne) values('Date du match : '|| datemat);
	insert into tligne(ligne) values('Nombre de points marques : '||nbpoints);
	insert into tligne(ligne) values('Tirs a un point : '||tir1);
	insert into tligne(ligne) values('Tirs a deux points : '||tir2);
	insert into tligne(ligne) values('Tirs a trois points : '||tir3);

EXCEPTION
	when no_data_found then
		insert into tligne(ligne) values(error);

END;
.
/

select * from tligne;

ALOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO